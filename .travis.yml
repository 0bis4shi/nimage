sudo: required


services:
  - docker


before_script:
# Jessie

## Slim
  - docker build -t nimlang/nim:0.11.0-slim 0.11.0/slim
  - docker build -t nimlang/nim:0.11.2-slim 0.11.2/slim
  - docker build -t nimlang/nim:0.12.0-slim 0.12.0/slim
  - docker build -t nimlang/nim:0.13.0-slim 0.13.0/slim
  - docker build -t nimlang/nim:0.14.0-slim 0.14.0/slim
  - docker build -t nimlang/nim:0.14.2-slim 0.14.2/slim
  - docker build -t nimlang/nim:0.14.3-slim 0.14.3/slim
  - docker build -t nimlang/nim:0.15.0-slim 0.15.0/slim
  - docker build -t nimlang/nim:0.15.2-slim -t nimlang/nim:latest-slim 0.15.2/slim
  - docker build -t nimlang/nim:devel-slim devel/slim

## Regular
  - docker build -t nimlang/nim:0.13.0 0.13.0
  - docker build -t nimlang/nim:0.14.0 0.14.0
  - docker build -t nimlang/nim:0.14.2 0.14.2
  - docker build -t nimlang/nim:0.14.3 0.14.3
  - docker build -t nimlang/nim:0.15.0 0.15.0
  - docker build -t nimlang/nim:0.15.2 -t nimlang/nim:latest 0.15.2
  - docker build -t nimlang/nim:devel devel

# Onbuild
  - docker build -t nimlang/nim:0.13.0-onbuild 0.13.0/onbuild
  - docker build -t nimlang/nim:0.14.0-onbuild 0.14.0/onbuild
  - docker build -t nimlang/nim:0.14.2-onbuild 0.14.2/onbuild
  - docker build -t nimlang/nim:0.14.3-onbuild 0.14.3/onbuild
  - docker build -t nimlang/nim:0.15.0-onbuild 0.15.0/onbuild
  - docker build -t nimlang/nim:0.15.2-onbuild -t nimlang/nim:latest-onbuild 0.15.2/onbuild
  - docker build -t nimlang/nim:devel-onbuild devel/onbuild

# Alpine

## Slim
  - docker build -t nimlang/nim:0.11.0-alpine-slim 0.11.0/alpine/slim
  - docker build -t nimlang/nim:0.11.2-alpine-slim 0.11.2/alpine/slim
  - docker build -t nimlang/nim:0.12.0-alpine-slim 0.12.0/alpine/slim
  - docker build -t nimlang/nim:0.13.0-alpine-slim 0.13.0/alpine/slim
  - docker build -t nimlang/nim:0.14.0-alpine-slim 0.14.0/alpine/slim
  - docker build -t nimlang/nim:0.14.2-alpine-slim 0.14.2/alpine/slim
  - docker build -t nimlang/nim:0.14.3-alpine-slim 0.14.3/alpine/slim
  - docker build -t nimlang/nim:0.15.0-alpine-slim 0.15.0/alpine/slim
  - docker build -t nimlang/nim:0.15.2-alpine-slim -t nimlang/nim:latest-alpine-slim 0.15.2/alpine/slim
  - docker build -t nimlang/nim:devel-alpine-slim devel/alpine/slim

## Regular
  - docker build -t nimlang/nim:0.13.0-alpine 0.13.0/alpine
  - docker build -t nimlang/nim:0.14.0-alpine 0.14.0/alpine
  - docker build -t nimlang/nim:0.14.2-alpine 0.14.2/alpine
  - docker build -t nimlang/nim:0.14.3-alpine 0.14.3/alpine
  - docker build -t nimlang/nim:0.15.0-alpine 0.15.0/alpine
  - docker build -t nimlang/nim:0.15.2-alpine -t nimlang/nim:latest-alpine 0.15.2/alpine
  - docker build -t nimlang/nim:devel-alpine devel/alpine

## Onbuild
  - docker build -t nimlang/nim:0.13.0-alpine-onbuild 0.13.0/alpine/onbuild
  - docker build -t nimlang/nim:0.14.0-alpine-onbuild 0.14.0/alpine/onbuild
  - docker build -t nimlang/nim:0.14.2-alpine-onbuild 0.14.2/alpine/onbuild
  - docker build -t nimlang/nim:0.14.3-alpine-onbuild 0.14.3/alpine/onbuild
  - docker build -t nimlang/nim:0.15.2-alpine-onbuild -t nimlang/nim:latest-alpine-onbuild 0.15.2/alpine/onbuild
  - docker build -t nimlang/nim:devel-alpine-onbuild devel/alpine/onbuild


script:
  - docker login -e="$DOCKER_EMAIL" -u="$DOCKER_USERNAME" -p="$DOCKER_PASSWORD"

# Jessie

## Slim
  - docker push nimlang/nim:0.11.0-slim
  - docker push nimlang/nim:0.11.2-slim
  - docker push nimlang/nim:0.12.0-slim
  - docker push nimlang/nim:0.13.0-slim
  - docker push nimlang/nim:0.14.0-slim
  - docker push nimlang/nim:0.14.2-slim
  - docker push nimlang/nim:0.14.3-slim
  - docker push nimlang/nim:0.15.0-slim
  - docker push nimlang/nim:0.15.2-slim
  - docker push nimlang/nim:latest-slim
  - docker push nimlang/nim:devel-slim

## Regular
  - docker push nimlang/nim:0.13.0
  - docker push nimlang/nim:0.14.0
  - docker push nimlang/nim:0.14.2
  - docker push nimlang/nim:0.14.3
  - docker push nimlang/nim:0.15.0
  - docker push nimlang/nim:0.15.2
  - docker push nimlang/nim:latest
  - docker push nimlang/nim:devel

## Onbuild
  - docker push nimlang/nim:0.13.0-onbuild
  - docker push nimlang/nim:0.14.0-onbuild
  - docker push nimlang/nim:0.14.2-onbuild
  - docker push nimlang/nim:0.14.3-onbuild
  - docker push nimlang/nim:0.15.0-onbuild
  - docker push nimlang/nim:0.15.2-onbuild
  - docker push nimlang/nim:latest-onbuild
  - docker push nimlang/nim:devel-onbuild

# Alpine

## Slim
  - docker push nimlang/nim:0.11.0-alpine-slim
  - docker push nimlang/nim:0.11.2-alpine-slim
  - docker push nimlang/nim:0.12.0-alpine-slim
  - docker push nimlang/nim:0.13.0-alpine-slim
  - docker push nimlang/nim:0.14.0-alpine-slim
  - docker push nimlang/nim:0.14.2-alpine-slim
  - docker push nimlang/nim:0.14.3-alpine-slim
  - docker push nimlang/nim:0.15.0-alpine-slim
  - docker push nimlang/nim:0.15.2-alpine-slim
  - docker push nimlang/nim:latest-alpine-slim
  - docker push nimlang/nim:devel-alpine-slim

## Regular
  - docker push nimlang/nim:0.13.0-alpine
  - docker push nimlang/nim:0.14.0-alpine
  - docker push nimlang/nim:0.14.2-alpine
  - docker push nimlang/nim:0.14.3-alpine
  - docker push nimlang/nim:0.15.0-alpine
  - docker push nimlang/nim:0.15.2-alpine
  - docker push nimlang/nim:latest-alpine
  - docker push nimlang/nim:devel-alpine

## Onbuild
  - docker push nimlang/nim:0.13.0-alpine-onbuild
  - docker push nimlang/nim:0.14.0-alpine-onbuild
  - docker push nimlang/nim:0.14.2-alpine-onbuild
  - docker push nimlang/nim:0.14.3-alpine-onbuild
  - docker push nimlang/nim:0.15.0-alpine-onbuild
  - docker push nimlang/nim:0.15.2-alpine-onbuild
  - docker push nimlang/nim:latest-alpine-onbuild
  - docker push nimlang/nim:devel-alpine-onbuild
